(this["webpackJsonplntu-gpa-computer"]=this["webpackJsonplntu-gpa-computer"]||[]).push([[0],{110:function(e,t,s){},111:function(e,t,s){},112:function(e,t,s){},114:function(e,t,s){},117:function(e,t,s){},185:function(e,t,s){"use strict";s.r(t);var r=s(0),a=s.n(r),n=s(22),i=s.n(n),c=(s(110),s(51)),o=(s(111),s(112),s(6)),d=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"mt-7 font-semibold text-center text-4xl",children:"\u8fbd\u5b81\u5de5\u7a0b\u6280\u672f\u5927\u5b66"}),Object(o.jsx)("div",{className:"mt-3 font-semibold text-center text-4xl",children:"\u7ee9\u70b9\u8ba1\u7b97\u5668"})]})},u=s(104),l=(s(114),s(86)),h=s(32),m=s(33);function f(e){switch(e){case"\u4f18\u79c0":return 4.5;case"\u826f":case"\u5408\u683c":return 3.5;case"\u4e2d":return 2.5;case"\u53ca\u683c":return 1.5;default:return 0}}function x(e){return e>=95?4.5:e>=90?4:e>=85?3.5:e>=80?3:e>=75?2.5:e>=70?2:e>=65?1.5:e>=60?1:0}function j(e){switch(e){case 4.5:return 95;case 4:return 90;case 3.5:return 85;case 3:return 80;case 2.5:return 75;case 2:return 70;case 1.5:return 65;case 1:return 60;default:return 0}}var b=function(){function e(t,s,r,a,n,i,c,o,d){Object(h.a)(this,e),this.name=t,this.credit=s,this.score=r,this.gradePoint=a,this.initialSemester=n,this.passSemester=i,this.examSemesters=c,this.examYears=o,this.currentState=d,this.addedYear=void 0,this.examCount=void 0,this.addedYear={},this.examCount=0}return Object(m.a)(e,[{key:"examAtThisYear",value:function(e){return this.examYears.includes(e)}},{key:"examAtThisSemester",value:function(e){return this.examSemesters.includes(e)}},{key:"passedAtThisSemester",value:function(e){return this.passSemester===e}},{key:"passedAtThisYear",value:function(e){return e===this.passSemester.slice(0,-2)}},{key:"isPassed",value:function(){return this.currentState}},{key:"addExamYear",value:function(e){this.addedYear[e]||(this.examYears.push(e),this.addedYear[e]=!0)}},{key:"incrementExamCount",value:function(){this.examCount+=1}}]),e}(),v=function(){function e(){Object(h.a)(this,e),this.Years=void 0,this.Semesters=void 0,this.addedYears=void 0,this.addedSemesters=void 0,this.Years=[],this.Semesters=[],this.addedYears={},this.addedSemesters={}}return Object(m.a)(e,[{key:"addYear",value:function(e){this.addedYears[e]||(this.Years.push(e),this.addedYears[e]=!0)}},{key:"addSemester",value:function(e){this.addedSemesters[e]||(this.Semesters.push(e),this.addedSemesters[e]=!0)}}]),e}(),O=!0,p=function(){function e(t){Object(h.a)(this,e),this.semestersAndYears=void 0,this.addedCourses=void 0,this.rawScoreData=void 0,this.processHTMLString(t),this.semestersAndYears=new v,this.addedCourses={},this.dataTableToArray()}return Object(m.a)(e,[{key:"Courses",get:function(){return this.addedCourses}},{key:"getRealCourseName",value:function(e){return e.replaceAll("\n","").replaceAll("\t","").replaceAll(" (\u8865\u8003)","").replaceAll(" (\u91cd\u5b66)","").trim()}},{key:"getCleanText",value:function(e){return e.replaceAll("\n","").replaceAll("\t","")}},{key:"isReExamCourse",value:function(e){return/\u8865\u8003/.test(e)}},{key:"isReStudyCourse",value:function(e){return/\u91cd\u5b66/.test(e)}},{key:"processHTMLString",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".grid table tbody");this.rawScoreData=t.querySelectorAll("tr")}},{key:"dataTableToArray",value:function(){var e=this;this.rawScoreData.forEach((function(t){var s,r=t.querySelectorAll("td");r[3].childNodes.length>1&&(s=e.isReExamCourse(e.getCleanText(r[3].childNodes[1].textContent)));var a,n,i=e.getRealCourseName(r[3].childNodes[0].textContent),c=e.getCleanText(r[0].textContent),o=parseFloat(e.getCleanText(r[5].textContent));if(r.length>13){n=x(a=parseInt(e.getCleanText(r[12].textContent)));isNaN(a)&&(a=j(n=f(e.getCleanText(r[12].textContent))))}else{n=x(a=parseInt(e.getCleanText(r[10].textContent)));isNaN(a)&&(a=j(n=f(e.getCleanText(r[10].textContent))))}var d=c.slice(0,-2);if(e.semestersAndYears.addYear(d),e.semestersAndYears.addSemester(c),void 0===e.addedCourses[i]){var u=new b(i,o,a,n,c,c,[c],[],O);u.addExamYear(d),u.incrementExamCount(),a<60&&(u.currentState=false,u.passSemester=""),s&&u.incrementExamCount(),e.addedCourses[i]=u}else e.addedCourses[i].examSemesters.push(c),e.addedCourses[i].addExamYear(d),e.addedCourses[i].incrementExamCount(),a>=60&&(e.addedCourses[i].currentState=O,e.addedCourses[i].passSemester=c,e.addedCourses[i].gradePoint=n),a>=e.addedCourses[i].score&&(e.addedCourses[i].score=a)}))}}]),e}(),g=s(87),y=function(){function e(t){Object(h.a)(this,e),this.courses=void 0,this.semestersAndYears=void 0,this.coursesOfSemesters=void 0,this.coursesOfYears=void 0;var s=new p(t);this.courses=s.Courses,console.log(this.courses),this.semestersAndYears=s.semestersAndYears,this.classifyCoursesBySemestersAndYears(this.courses)}return Object(m.a)(e,[{key:"getTotalGPA",value:function(e){var t=0,s=0;for(var r in e){t+=e[r].credit;var a=e[r].gradePoint/e[r].examCount;a<1&&(a=1),s+=e[r].credit*a}return s/t}},{key:"getTotalWAM",value:function(e){var t=0,s=0;for(var r in e)t+=e[r].credit,s+=e[r].credit*e[r].score;return s/t}},{key:"classifyCoursesBySemestersAndYears",value:function(e){var t=this.semestersAndYears.Semesters,s=this.semestersAndYears.Years;this.coursesOfSemesters={},this.coursesOfYears={};var r,a=Object(l.a)(t);try{for(a.s();!(r=a.n()).done;){var n=r.value;for(var i in this.coursesOfSemesters[n]={},e)if(e[i].examAtThisSemester(n)){var c=Object(g.cloneDeep)(e[i]);c.currentState===O&&c.examCount>2&&(c.passedAtThisSemester(n)||(c.gradePoint=0)),this.coursesOfSemesters[n][c.name]=c}}}catch(f){a.e(f)}finally{a.f()}var o,d=Object(l.a)(s);try{for(d.s();!(o=d.n()).done;){var u=o.value;for(var h in this.coursesOfYears[u]={},e)if(e[h].examAtThisYear(u)){var m=Object(g.cloneDeep)(e[h]);m.currentState===O&&m.examCount>2&&(m.passedAtThisYear(u)||(m.gradePoint=0)),this.coursesOfYears[u][m.name]=m}}}catch(f){d.e(f)}finally{d.f()}}},{key:"gpaAndWAM",get:function(){var e={gpa:0,wam:0,bySemester:[],byYear:[]};for(var t in e.byYear=[],e.bySemester=[],e.gpa=this.getTotalGPA(this.courses),e.wam=this.getTotalWAM(this.courses),this.coursesOfSemesters)e.bySemester.push({semesterName:t.replaceAll(" 1"," \u79cb").replaceAll(" 2"," \u6625"),gpa:this.getTotalGPA(this.coursesOfSemesters[t]),wam:this.getTotalWAM(this.coursesOfSemesters[t])});for(var s in this.coursesOfYears)e.byYear.push({year:s,gpa:this.getTotalGPA(this.coursesOfYears[s]),wam:this.getTotalWAM(this.coursesOfYears[s])});return e}}]),e}(),S=function(e){var t=e.setGPAData,s=Object(r.useState)({name:"",size:""}),a=Object(c.a)(s,2),n=a[0],i=a[1],d=Object(r.useState)(!1),l=Object(c.a)(d,2),h=(l[0],l[1]),m=Object(r.useState)(!1),f=Object(c.a)(m,2),x=(f[0],f[1]),j=Object(r.useRef)(null);Object(r.useEffect)((function(){""!==n.size&&(u.b.info("\u6587\u4ef6\u5df2\u52a0\u8f7d"),t(void 0),h(!0),x(!1))}),[n]);return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"fileReader",children:[Object(o.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",ref:j,onChange:function(e){i({name:e.target.files[0].name||"",size:e.target.files[0].size+" Bytes"||!1})}}),Object(o.jsx)("label",{htmlFor:"file",className:"Btn selectBtn",children:"\u9009\u62e9\u6587\u4ef6"}),Object(o.jsxs)("label",{className:"Btn calculateBtn",onClick:function(){var e,s;if(!(null===(e=j.current)||void 0===e?void 0:e.files)||j.current.files[0]){var r=new FileReader,a=null===j||void 0===j||null===(s=j.current)||void 0===s?void 0:s.files[0];r.readAsText(a,"utf-8"),r.onloadend=function(e){var s=e.target.result;try{var r=new y(s);t(r.gpaAndWAM),x(!0),u.b.success("\u8ba1\u7b97\u6210\u529f")}catch(a){u.b.error("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\u6216\u5185\u5bb9\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),console.log(a),x(!1),h(!1)}}}else alert("\u8bf7\u9009\u62e9\u6587\u4ef6")},children:["\u8ba1\u7b97\u6210\u7ee9"," "]})]})})},C=(s(117),function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"footer",children:[Object(o.jsx)("p",{className:"footer-item",children:"Contributors:"}),Object(o.jsx)("p",{className:"footer-item",children:"Freesia hybrida Klatt, Software College"}),Object(o.jsx)("p",{className:"footer-item",children:"Deep Dark Cat, Software College"})]})})}),Y=s(186),A=Y.a.TabPane,T=function(e){var t=e.data,s=(e.type,e.tabPositon),r=e.center;return Object(o.jsx)("div",{style:{maxHeight:"250px"},children:Object(o.jsx)(Y.a,{tabPosition:null!==s&&void 0!==s?s:"left",centered:r,style:{height:200},children:t.map((function(e){var t;return Object(o.jsx)(A,{tab:null!==(t=e.year)&&void 0!==t?t:e.semesterName,children:Object(o.jsx)("div",{className:"mx-auto text-center w-full",style:{height:"200px"},children:Object(o.jsxs)("div",{className:"my-auto",style:{marginTop:"50px",marginBottom:"20px"},children:[Object(o.jsxs)("h2",{children:["\u5e73\u5747\u7ee9\u70b9: ",e.gpa.toFixed(4)]}),Object(o.jsxs)("h2",{children:["\u52a0\u6743\u5e73\u5747\u5206: ",e.wam.toFixed(4)]})]})})},e.wam)}))})})},N=Y.a.TabPane,w=function(){var e=Object(r.useContext)(P);return Object(o.jsx)("div",{className:"mx-auto my-0",style:{width:"580px",minHeight:"270px"},children:Object(o.jsxs)(Y.a,{centered:!0,children:[Object(o.jsx)(N,{tab:"\u603b\u8ba1",children:Object(o.jsx)("div",{className:"mx-auto text-center w-full",children:Object(o.jsxs)("div",{className:"my-auto",children:[Object(o.jsxs)("h2",{children:["\u5e73\u5747\u7ee9\u70b9: ",null===e||void 0===e?void 0:e.gpa.toFixed(4)]}),Object(o.jsxs)("h2",{children:["\u52a0\u6743\u5e73\u5747\u5206: ",null===e||void 0===e?void 0:e.wam.toFixed(4)]})]})})},1),Object(o.jsx)(N,{tab:"\u5b66\u671f",children:Object(o.jsx)(T,{tabPositon:"top",center:!0,data:e.bySemester,type:"\u5b66\u671f"})},2),Object(o.jsx)(N,{tab:"\u5b66\u5e74",children:Object(o.jsx)(T,{tabPositon:"top",data:e.byYear,type:"\u5b66\u5e74",center:!0})},3)]})})},k=s(187),P=a.a.createContext({gpa:0,wam:0,bySemester:[],byYear:[]});var F=function(){var e=Object(r.useState)(void 0),t=Object(c.a)(e,2),s=t[0],a=t[1];return Object(o.jsx)(P.Provider,{value:s,children:Object(o.jsxs)("div",{children:[Object(o.jsx)(d,{}),Object(o.jsx)("div",{className:"readme",children:Object(o.jsx)(k.a,{type:"link",href:"https://gpahelp.xcland.tech/",children:"\u4f7f\u7528\u6307\u5317"})}),Object(o.jsx)(S,{setGPAData:a}),s?Object(o.jsx)(w,{}):null,s?null:Object(o.jsx)(C,{})]})})},E=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,188)).then((function(t){var s=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),r(e),a(e),n(e),i(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(F,{})}),document.getElementById("root")),E()}},[[185,1,2]]]);
//# sourceMappingURL=main.769c3aea.chunk.js.map