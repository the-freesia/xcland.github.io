(this["webpackJsonplntu-gpa-computer"]=this["webpackJsonplntu-gpa-computer"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(1),r=s.n(a),n=s(8),i=s.n(n),c=(s(13),s(5)),u=(s(14),s(0)),o=function(e){var t=e.type,s=e.title,a=e.gpa,r=e.wam;return Object(u.jsxs)("div",{className:"resultCard",children:[Object(u.jsxs)("p",{className:"item-title",children:[t,":",s]}),Object(u.jsxs)("p",{className:"item-gpa",children:["\u5e73\u5747\u7ee9\u70b9: ",a]}),Object(u.jsxs)("p",{className:"item-wam",children:["\u52a0\u6743\u5e73\u5747\u5206: ",r]})]})},l=(s(16),function(e){var t=Object(a.useContext)(A).gpaData;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"listContainer",children:0!==t.gpa?Object(u.jsx)(o,{type:"\u603b\u8ba1",gpa:t.gpa.toFixed(4),wam:t.wam.toFixed(4)}):""}),Object(u.jsx)("div",{className:"listContainer",children:void 0!==t.byYear?t.byYear.map((function(e){return Object(u.jsx)(o,{type:"\u5b66\u5e74",title:e.year,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)},e.gpa)})):""}),Object(u.jsx)("div",{className:"listContainer",children:void 0!==t.bySemester?t.bySemester.map((function(e){return Object(u.jsx)(o,{type:"\u5b66\u671f",title:e.semesterName,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)},e.gpa)})):""})]})}),d=(s(17),s(18),function(){return Object(u.jsx)("h1",{className:"header",children:"LNTU GPA Calculator"})}),h=(s(19),s(4)),m=s(2),f=s(3);function x(e){switch(e){case"\u4f18\u79c0":return 4.5;case"\u826f":case"\u5408\u683c":return 3.5;case"\u4e2d":return 2.5;case"\u53ca\u683c":return 1.5;default:return 0}}function j(e){return e>=95?4.5:e>=90?4:e>=85?3.5:e>=80?3:e>=75?2.5:e>=70?2:e>=65?1.5:e>=60?1:0}function p(e){switch(e){case 4.5:return 95;case 4:return 90;case 3.5:return 85;case 3:return 80;case 2.5:return 75;case 2:return 70;case 1.5:return 65;case 1:return 60;default:return 0}}var b=function(){function e(t,s,a,r,n,i,c,u,o){Object(m.a)(this,e),this.name=t,this.credit=s,this.score=a,this.gradePoint=r,this.initialSemester=n,this.passSemester=i,this.examSemesters=c,this.examYears=u,this.currentState=o,this.addedYear={},this.examCount=1}return Object(f.a)(e,[{key:"examAtThisYear",value:function(e){return this.examYears.includes(e)}},{key:"examAtThisSemester",value:function(e){return this.examSemesters.includes(e)}},{key:"passedAtThisSemester",value:function(e){return this.passSemester===e}},{key:"passedAtThisYear",value:function(e){return e===this.passSemester.slice(0,-2)}},{key:"isPassed",value:function(){return this.currentState}},{key:"addExamYear",value:function(e){this.addedYear[e]||(this.examYears.push(e),this.addedYear[e]=!0)}},{key:"incrementExamCount",value:function(){this.examCount+=1}},{key:"deepCloneCourseInfo",value:function(){var e,t=this.name,s=this.credit,a=this.score,r=this.gradePoint,n=this.gradePoint,i=this.passSemester,c=[],u=Object(h.a)(this.examSemesters);try{for(u.s();!(e=u.n()).done;){var o=e.value;c.push(o)}}catch(x){u.e(x)}finally{u.f()}var l,d=[],m=Object(h.a)(this.examYears);try{for(m.s();!(l=m.n()).done;){var f=l.value;d.push(f)}}catch(x){m.e(x)}finally{m.f()}return{name:t,credit:s,score:a,gradePoint:r,initialSemester:n,passSemester:i,examSemesters:c,examYears:d,currentState:this.currentState,examCount:this.examCount,passedAtThisYear:this.passedAtThisYear,passedAtThisSemester:this.passedAtThisSemester}}}]),e}(),v=function(){function e(){Object(m.a)(this,e),this.Years=[],this.Semesters=[],this.addedYears={},this.addedSemesters={}}return Object(f.a)(e,[{key:"addYear",value:function(e){this.addedYears[e]||(this.Years.push(e),this.addedYears[e]=!0)}},{key:"addSemester",value:function(e){this.addedSemesters[e]||(this.Semesters.push(e),this.addedSemesters[e]=!0)}}]),e}(),O=!0,g=function(){function e(t){Object(m.a)(this,e),this.processHTMLString(t),this.semestersAndYears=new v,this.addedCourses={},this.dataTableToArray()}return Object(f.a)(e,[{key:"Courses",get:function(){return this.addedCourses}},{key:"getRealCourseName",value:function(e){return e.replaceAll("\n","").replaceAll("\t","").replaceAll(" (\u8865\u8003)","").replaceAll(" (\u91cd\u5b66)","").trim()}},{key:"getCleanText",value:function(e){return e.replaceAll("\n","").replaceAll("\t","")}},{key:"isReExamCourse",value:function(e){return/\u8865\u8003/.test(e)}},{key:"isReStudyCourse",value:function(e){return/\u91cd\u5b66/.test(e)}},{key:"processHTMLString",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".grid table tbody");this.rawScoreData=t.querySelectorAll("tr")}},{key:"dataTableToArray",value:function(){var e=this;this.rawScoreData.forEach((function(t){var s,a=t.querySelectorAll("td");a[3].childNodes.length>1&&(s=e.isReExamCourse(e.getCleanText(a[3].childNodes[1].textContent)));var r,n,i=e.getRealCourseName(a[3].childNodes[0].textContent),c=e.getCleanText(a[0].textContent),u=parseFloat(e.getCleanText(a[5].textContent));if(a.length>13){n=j(r=parseInt(e.getCleanText(a[12].textContent)));isNaN(r)&&(r=p(n=x(e.getCleanText(a[12].textContent))))}else{n=j(r=parseInt(e.getCleanText(a[10].textContent)));isNaN(r)&&(r=p(n=x(e.getCleanText(a[10].textContent))))}var o=c.slice(0,-2);if(e.semestersAndYears.addYear(o),e.semestersAndYears.addSemester(c),void 0===e.addedCourses[i]){var l=new b(i,u,r,n,c,c,[c],[],O);l.addExamYear(o),s&&r>=60?l.incrementExamCount():!s&&r<60?(l.currentState=false,l.passSemester=""):s&&r<60&&(l.currentState=false,l.passSemester="",l.incrementExamCount()),e.addedCourses[i]=l}else e.addedCourses[i].examSemesters.push(c),e.addedCourses[i].addExamYear(o),r>=60&&(e.addedCourses[i].currentState=O,e.addedCourses[i].passSemester=c,e.addedCourses[i].gradePoint=n),e.addedCourses[i].incrementExamCount(),r>=e.addedCourses[i].score&&(e.addedCourses[i].score=r)}))}}]),e}(),C=function(){function e(t){Object(m.a)(this,e);var s=new g(t);this.courses=s.Courses,this.semestersAndYears=s.semestersAndYears,this.classifyCoursesBySemestersAndYears(this.courses)}return Object(f.a)(e,[{key:"getTotalGPA",value:function(e){var t=0,s=0;for(var a in e){t+=e[a].credit;var r=e[a].gradePoint/e[a].examCount;r<1&&(r=1),s+=e[a].credit*r}return s/t}},{key:"getTotalWAM",value:function(e){var t=0,s=0;for(var a in e)t+=e[a].credit,s+=e[a].credit*e[a].score;return s/t}},{key:"classifyCoursesBySemestersAndYears",value:function(e){var t=this.semestersAndYears.Semesters,s=this.semestersAndYears.Years;this.coursesOfSemesters={},this.coursesOfYears={};var a,r=Object(h.a)(t);try{for(r.s();!(a=r.n()).done;){var n=a.value;for(var i in this.coursesOfSemesters[n]=[],e)if(e[i].examAtThisSemester(n)){var c=e[i].deepCloneCourseInfo();c.currentState===O&&c.examCount>2&&(c.passedAtThisSemester(n)||(c.gradePoint=0)),this.coursesOfSemesters[n].push(c)}}}catch(f){r.e(f)}finally{r.f()}var u,o=Object(h.a)(s);try{for(o.s();!(u=o.n()).done;){var l=u.value;for(var d in this.coursesOfYears[l]=[],e)if(e[d].examAtThisYear(l)){var m=e[d].deepCloneCourseInfo();m.currentState===O&&m.examCount>2&&(m.passedAtThisYear(l)||(m.gradePoint=0)),this.coursesOfYears[l].push(m)}}}catch(f){o.e(f)}finally{o.f()}}},{key:"gpaAndWAM",get:function(){var e={byYear:[],bySemester:[]};for(var t in e.gpa=this.getTotalGPA(this.courses),e.wam=this.getTotalWAM(this.courses),this.coursesOfSemesters)e.bySemester.push({semesterName:t.replaceAll(" 1"," \u79cb").replaceAll(" 2"," \u6625"),gpa:this.getTotalGPA(this.coursesOfSemesters[t]),wam:this.getTotalWAM(this.coursesOfSemesters[t])});for(var s in this.coursesOfYears)e.byYear.push({year:s,gpa:this.getTotalGPA(this.coursesOfYears[s]),wam:this.getTotalWAM(this.coursesOfYears[s])});return e}}]),e}(),S=function(){var e=Object(a.useState)({name:"",size:0}),t=Object(c.a)(e,2),s=t[0],r=t[1],n=Object(a.useState)(!1),i=Object(c.a)(n,2),o=i[0],l=i[1],d=Object(a.useState)(!1),h=Object(c.a)(d,2),m=h[0],f=h[1],x=Object(a.useRef)(-1);Object(a.useEffect)((function(){s.size&&(l(!0),f(!1))}),[s]);var j=Object(a.useContext)(A);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"fileReader",children:[Object(u.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",ref:x,onChange:function(e){r({name:e.target.files[0].name||"",size:e.target.files[0].size+" Bytes"||!1})}}),Object(u.jsx)("label",{htmlFor:"file",className:"Btn selectBtn",children:"\u9009\u62e9\u6587\u4ef6"}),Object(u.jsx)("label",{className:"Btn calculateBtn",onClick:function(){if(x.current.files[0]){f(!0);var e=new FileReader,t=x.current.files[0];e.readAsText(t,"utf-8"),e.onloadend=function(e){var t=e.target.result;try{var s=new C(t);j.setGPAData(s.gpaAndWAM)}catch(a){alert("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\u6216\u5185\u5bb9\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),console.log(a),f(!1),l(!1)}}}else alert("\u8bf7\u9009\u62e9\u6587\u4ef6")},children:"\u8ba1\u7b97\u6210\u7ee9 "})]}),o?Object(u.jsx)("div",{className:"notice",children:Object(u.jsx)("p",{className:"notice-item",children:m?"\u8ba1\u7b97\u7ed3\u679c\u5982\u4e0b":"\u6587\u4ef6\u5df2\u52a0\u8f7d"})}):""]})},y=(s(20),function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"footer",children:[Object(u.jsx)("p",{className:"footer-item",children:"\u53c2\u4e0e\u5236\u4f5c:"}),Object(u.jsx)("p",{className:"footer-item",children:"@xcl/\u8f6f\u4ef6\u5b66\u9662"}),Object(u.jsx)("p",{className:"footer-item",children:"@ddc/\u8f6f\u4ef6\u5b66\u9662"}),Object(u.jsx)("p",{className:"footer-item",children:"@RealmsPro/\u7535\u5b50\u4e0e\u4fe1\u606f\u5de5\u7a0b\u5b66\u9662"})]})})}),A=r.a.createContext({});var Y=function(){var e=Object(a.useState)({gpa:0,wam:0,bySemester:[],byYear:[]}),t=Object(c.a)(e,2),s=t[0],r=t[1];return Object(u.jsxs)(A.Provider,{value:{gpaData:s,setGPAData:r},children:[Object(u.jsx)(d,{}),Object(u.jsx)("p",{className:"readme",children:Object(u.jsx)("a",{href:"https://gpahelp.xcland.tech/",children:"\u4f7f\u7528\u6307\u5317"})}),Object(u.jsx)(S,{}),Object(u.jsx)(l,{}),Object(u.jsx)(y,{})]})},T=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,22)).then((function(t){var s=t.getCLS,a=t.getFID,r=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),r(e),n(e),i(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(Y,{})}),document.getElementById("root")),T()}],[[21,1,2]]]);
//# sourceMappingURL=main.a6a27056.chunk.js.map