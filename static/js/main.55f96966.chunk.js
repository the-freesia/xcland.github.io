(this["webpackJsonplntu-gpa-computer"]=this["webpackJsonplntu-gpa-computer"]||[]).push([[0],[,,,,,,,,,,,function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var c=s(1),a=s.n(c),r=s(4),n=s.n(r),i=(s(11),s(2)),u=(s(12),s(0)),o=function(e){console.log(e);var t=e.type,s=e.title,c=e.gpa,a=e.wam;return Object(u.jsxs)("div",{className:"resultCard",children:[Object(u.jsxs)("p",{className:"item-title",children:[t,":",s]}),Object(u.jsxs)("p",{className:"item-gpa",children:["\u5e73\u5747\u7ee9\u70b9: ",c]}),Object(u.jsxs)("p",{className:"item-wam",children:["\u52a0\u6743\u5e73\u5747\u5206: ",a]})]})},l=(s(14),function(e){var t=Object(c.useContext)(p).gpaData;return console.log("Result List",t),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"listContainer",children:0!==t.gpa?Object(u.jsx)(o,{type:"\u603b\u8ba1",gpa:t.gpa.toFixed(4),wam:t.wam.toFixed(4)}):""}),Object(u.jsx)("div",{className:"listContainer",children:void 0!==t.byYear?t.byYear.map((function(e){return Object(u.jsx)(o,{type:"\u5b66\u5e74",title:e.year,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)})})):""}),Object(u.jsx)("div",{className:"listContainer",children:void 0!==t.bySemester?t.bySemester.map((function(e){return Object(u.jsx)(o,{type:"\u5b66\u671f",title:e.semesterName,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)})})):""})]})}),j=(s(15),s(16),function(){return Object(u.jsx)("h1",{className:"header",children:"LNTU GPA Calculator"})}),b=(s(17),s(5)),m=s(6),d=function(){function e(t){Object(b.a)(this,e),this.__processHTMLString(t),this.totalSubjects=[],this.__rawData2Array(),this.__classifySubjects()}return Object(m.a)(e,[{key:"__processHTMLString",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".grid table tbody");this.rawScoreData=t.querySelectorAll("tr")}},{key:"__rawData2Array",value:function(){var e=this;this.rawScoreData.forEach((function(t){var s,c,a=t.querySelectorAll("td"),r=a[3].childNodes[0].textContent.replaceAll("\n","").replaceAll("\t","").trim(),n=a[0].textContent,i=parseFloat(a[5].textContent);a.length>13?(s=parseInt(a[12].textContent),c=parseFloat(a[13].textContent)):(s=parseInt(a[10].textContent),c=parseFloat(a[11].textContent)),e.__isNotPassedSubject(a)?e.__isValidNotPassedSubjectInfo(a)&&e.__addSubject(r,s,i,c,n):e.__addSubject(r,s,i,c,n)}))}},{key:"__isNotPassedSubject",value:function(e){return void 0!==e[3].childNodes[1]}},{key:"__isValidNotPassedSubjectInfo",value:function(e){return e[3].childNodes[1].textContent.replaceAll("\n","").replaceAll("\t","").trim().includes("\u8865\u8003")}},{key:"__addSubject",value:function(e,t,s,c,a){this.totalSubjects.push(this.__createNewSubjectData(e,t,s,c,a))}},{key:"__createNewSubjectData",value:function(e,t,s,c,a){return{subjectName:e,subjectScore:t,subjectCredit:s,subjectGradePoint:c,subjectSemester:a}}},{key:"__classifySubjects",value:function(){var e=this;return this.subjectsOfSemesters={},this.subjectsOfYears={},this.totalSubjects.forEach((function(t){void 0===e.subjectsOfSemesters[t.subjectSemester]&&(e.subjectsOfSemesters[t.subjectSemester]={semesterName:t.subjectSemester,scores:[]});var s=t.subjectSemester.slice(0,-2);void 0===e.subjectsOfYears[s]&&(e.subjectsOfYears[s]={year:s,scores:[]}),e.subjectsOfSemesters[t.subjectSemester].scores.push(t),e.subjectsOfYears[s].scores.push(t)})),this.subjectsOfSemesters}},{key:"__computeGPA",value:function(e){var t=0,s=0;return e.forEach((function(e){s+=e.subjectCredit,t+=e.subjectGradePoint*e.subjectCredit})),t/s}},{key:"__levelConvert2Score",value:function(e){switch(e){case 4.5:return 95;case 4:return 90;case 3.5:return 85;case 3:return 80;case 2.5:return 75;case 2:return 70;case 1.5:return 65;case 1:return 60;default:return 0}}},{key:"__computeWAM",value:function(e){var t=this,s=0,c=0;return e.forEach((function(e){c+=e.subjectCredit,Number.isNaN(e.subjectScore)&&(e.subjectScore=t.__levelConvert2Score(e.subjectGradePoint)),s+=e.subjectScore*e.subjectCredit})),s/c}},{key:"gpaAndWAM",get:function(){var e={byYear:[],bySemester:[]};for(var t in e.gpa=this.__computeGPA(this.totalSubjects),e.wam=this.__computeWAM(this.totalSubjects),this.subjectsOfSemesters)e.bySemester.push({semesterName:this.subjectsOfSemesters[t].semesterName,gpa:this.__computeGPA(this.subjectsOfSemesters[t].scores),wam:this.__computeWAM(this.subjectsOfSemesters[t].scores)});for(var s in this.subjectsOfYears)e.byYear.push({year:this.subjectsOfYears[s].year,gpa:this.__computeGPA(this.subjectsOfYears[s].scores),wam:this.__computeWAM(this.subjectsOfYears[s].scores)});return e}}]),e}(),f=function(){var e=Object(c.useState)({name:"",size:0}),t=Object(i.a)(e,2),s=t[0],a=t[1],r=Object(c.useState)(!1),n=Object(i.a)(r,2),o=n[0],l=n[1],j=Object(c.useState)(!1),b=Object(i.a)(j,2),m=b[0],f=b[1],h=Object(c.useRef)(-1);Object(c.useEffect)((function(){s.size&&(l(!0),f(!1))}),[s]);var O=Object(c.useContext)(p);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"fileReader",children:[Object(u.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",ref:h,onChange:function(e){a({name:e.target.files[0].name||"",size:e.target.files[0].size+" Bytes"||!1})}}),Object(u.jsx)("label",{htmlFor:"file",className:"Btn selectBtn",children:"\u9009\u62e9\u6587\u4ef6"}),Object(u.jsx)("label",{className:"Btn calculateBtn",onClick:function(){if(h.current.files[0]){f(!0);var e=new FileReader,t=h.current.files[0];e.readAsText(t,"utf-8"),e.onloadend=function(e){var t=e.target.result;try{var s=new d(t);O.setGPAData(s.gpaAndWAM)}catch(c){alert("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\u6216\u5185\u5bb9\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),f(!1),l(!1)}}}else alert("\u8bf7\u9009\u62e9\u6587\u4ef6")},children:"\u8ba1\u7b97\u6210\u7ee9 "})]}),o?Object(u.jsx)("div",{className:"notice",children:Object(u.jsx)("p",{className:"notice-item",children:m?"\u8ba1\u7b97\u7ed3\u679c\u5982\u4e0b":"\u6587\u4ef6\u5df2\u52a0\u8f7d"})}):""]})},h=(s(18),function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"footer",children:[Object(u.jsx)("p",{className:"footer-item",children:"\u53c2\u4e0e\u5236\u4f5c:"}),Object(u.jsx)("p",{className:"footer-item",children:"@xcl/\u8f6f\u4ef6\u5b66\u9662"}),Object(u.jsx)("p",{className:"footer-item",children:"@ddc/\u8f6f\u4ef6\u5b66\u9662"}),Object(u.jsx)("p",{className:"footer-item",children:"@RealmsPro/\u7535\u5b50\u4e0e\u4fe1\u606f\u5de5\u7a0b\u5b66\u9662"})]})})}),p=a.a.createContext({});var O=function(){var e=Object(c.useState)({gpa:0,wam:0,bySemester:[],byYear:[]}),t=Object(i.a)(e,2),s=t[0],a=t[1];return console.log(s),Object(u.jsxs)(p.Provider,{value:{gpaData:s,setGPAData:a},children:[Object(u.jsx)(j,{}),Object(u.jsx)("p",{className:"readme",children:Object(u.jsx)("a",{href:"https://gpahelp.xcland.tech/",children:"\u4f7f\u7528\u6307\u5317"})}),Object(u.jsx)(f,{}),Object(u.jsx)(l,{}),Object(u.jsx)(h,{})]})},S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,20)).then((function(t){var s=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,n=t.getTTFB;s(e),c(e),a(e),r(e),n(e)}))};n.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(O,{})}),document.getElementById("root")),S()}],[[19,1,2]]]);
//# sourceMappingURL=main.55f96966.chunk.js.map