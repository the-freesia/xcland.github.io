(this["webpackJsonplntu-gpa-computer"]=this["webpackJsonplntu-gpa-computer"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,s){},function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},,,function(e,t,s){},function(e,t,s){"use strict";s.r(t);var r=s(1),a=s.n(r),n=s(9),i=s.n(n),c=(s(14),s(4)),o=(s(15),s(0)),d=function(e){var t=e.type,s=e.title,r=e.gpa,a=e.wam;return Object(o.jsxs)("div",{className:"resultCard",children:[Object(o.jsxs)("p",{className:"item-title",children:[t,":",s]}),Object(o.jsxs)("p",{className:"item-gpa",children:["\u5e73\u5747\u7ee9\u70b9: ",r]}),Object(o.jsxs)("p",{className:"item-wam",children:["\u52a0\u6743\u5e73\u5747\u5206: ",a]})]})},u=(s(17),function(e){var t=Object(r.useContext)(A);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"listContainer",children:0!==t.gpa?Object(o.jsx)(d,{type:"\u603b\u8ba1",title:"",gpa:t.gpa.toFixed(4),wam:t.wam.toFixed(4)}):""}),Object(o.jsx)("div",{className:"listContainer",children:void 0!==t.byYear?t.byYear.map((function(e){return Object(o.jsx)(d,{type:"\u5b66\u5e74",title:e.year,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)},e.gpa)})):""}),Object(o.jsx)("div",{className:"listContainer",children:void 0!==t.bySemester?t.bySemester.map((function(e){return Object(o.jsx)(d,{type:"\u5b66\u671f",title:e.semesterName,gpa:e.gpa.toFixed(4),wam:e.wam.toFixed(4)},e.gpa)})):""})]})}),l=(s(18),s(19),function(){return Object(o.jsx)("h1",{className:"header",children:"LNTU GPA Calculator"})}),h=(s(20),s(7)),m=s(2),f=s(3);function j(e){switch(e){case"\u4f18\u79c0":return 4.5;case"\u826f":case"\u5408\u683c":return 3.5;case"\u4e2d":return 2.5;case"\u53ca\u683c":return 1.5;default:return 0}}function x(e){return e>=95?4.5:e>=90?4:e>=85?3.5:e>=80?3:e>=75?2.5:e>=70?2:e>=65?1.5:e>=60?1:0}function v(e){switch(e){case 4.5:return 95;case 4:return 90;case 3.5:return 85;case 3:return 80;case 2.5:return 75;case 2:return 70;case 1.5:return 65;case 1:return 60;default:return 0}}var b=function(){function e(t,s,r,a,n,i,c,o,d){Object(m.a)(this,e),this.name=t,this.credit=s,this.score=r,this.gradePoint=a,this.initialSemester=n,this.passSemester=i,this.examSemesters=c,this.examYears=o,this.currentState=d,this.addedYear=void 0,this.examCount=void 0,this.addedYear={},this.examCount=0}return Object(f.a)(e,[{key:"examAtThisYear",value:function(e){return this.examYears.includes(e)}},{key:"examAtThisSemester",value:function(e){return this.examSemesters.includes(e)}},{key:"passedAtThisSemester",value:function(e){return this.passSemester===e}},{key:"passedAtThisYear",value:function(e){return e===this.passSemester.slice(0,-2)}},{key:"isPassed",value:function(){return this.currentState}},{key:"addExamYear",value:function(e){this.addedYear[e]||(this.examYears.push(e),this.addedYear[e]=!0)}},{key:"incrementExamCount",value:function(){this.examCount+=1}}]),e}(),p=function(){function e(){Object(m.a)(this,e),this.Years=void 0,this.Semesters=void 0,this.addedYears=void 0,this.addedSemesters=void 0,this.Years=[],this.Semesters=[],this.addedYears={},this.addedSemesters={}}return Object(f.a)(e,[{key:"addYear",value:function(e){this.addedYears[e]||(this.Years.push(e),this.addedYears[e]=!0)}},{key:"addSemester",value:function(e){this.addedSemesters[e]||(this.Semesters.push(e),this.addedSemesters[e]=!0)}}]),e}(),O=!0,g=function(){function e(t){Object(m.a)(this,e),this.semestersAndYears=void 0,this.addedCourses=void 0,this.rawScoreData=void 0,this.processHTMLString(t),this.semestersAndYears=new p,this.addedCourses={},this.dataTableToArray()}return Object(f.a)(e,[{key:"Courses",get:function(){return this.addedCourses}},{key:"getRealCourseName",value:function(e){return e.replaceAll("\n","").replaceAll("\t","").replaceAll(" (\u8865\u8003)","").replaceAll(" (\u91cd\u5b66)","").trim()}},{key:"getCleanText",value:function(e){return e.replaceAll("\n","").replaceAll("\t","")}},{key:"isReExamCourse",value:function(e){return/\u8865\u8003/.test(e)}},{key:"isReStudyCourse",value:function(e){return/\u91cd\u5b66/.test(e)}},{key:"processHTMLString",value:function(e){var t=(new DOMParser).parseFromString(e,"text/html").querySelector(".grid table tbody");this.rawScoreData=t.querySelectorAll("tr")}},{key:"dataTableToArray",value:function(){var e=this;this.rawScoreData.forEach((function(t){var s,r=t.querySelectorAll("td");r[3].childNodes.length>1&&(s=e.isReExamCourse(e.getCleanText(r[3].childNodes[1].textContent)));var a,n,i=e.getRealCourseName(r[3].childNodes[0].textContent),c=e.getCleanText(r[0].textContent),o=parseFloat(e.getCleanText(r[5].textContent));if(r.length>13){n=x(a=parseInt(e.getCleanText(r[12].textContent)));isNaN(a)&&(a=v(n=j(e.getCleanText(r[12].textContent))))}else{n=x(a=parseInt(e.getCleanText(r[10].textContent)));isNaN(a)&&(a=v(n=j(e.getCleanText(r[10].textContent))))}var d=c.slice(0,-2);if(e.semestersAndYears.addYear(d),e.semestersAndYears.addSemester(c),void 0===e.addedCourses[i]){var u=new b(i,o,a,n,c,c,[c],[],O);u.addExamYear(d),u.incrementExamCount(),a<60&&(u.currentState=false,u.passSemester=""),s&&u.incrementExamCount(),e.addedCourses[i]=u}else e.addedCourses[i].examSemesters.push(c),e.addedCourses[i].addExamYear(d),e.addedCourses[i].incrementExamCount(),a>=60&&(e.addedCourses[i].currentState=O,e.addedCourses[i].passSemester=c,e.addedCourses[i].gradePoint=n),a>=e.addedCourses[i].score&&(e.addedCourses[i].score=a)}))}}]),e}(),S=s(8),C=function(){function e(t){Object(m.a)(this,e),this.courses=void 0,this.semestersAndYears=void 0,this.coursesOfSemesters=void 0,this.coursesOfYears=void 0;var s=new g(t);this.courses=s.Courses,console.log(this.courses),this.semestersAndYears=s.semestersAndYears,this.classifyCoursesBySemestersAndYears(this.courses)}return Object(f.a)(e,[{key:"getTotalGPA",value:function(e){var t=0,s=0;for(var r in e){t+=e[r].credit;var a=e[r].gradePoint/e[r].examCount;a<1&&(a=1),s+=e[r].credit*a}return s/t}},{key:"getTotalWAM",value:function(e){var t=0,s=0;for(var r in e)t+=e[r].credit,s+=e[r].credit*e[r].score;return s/t}},{key:"classifyCoursesBySemestersAndYears",value:function(e){var t=this.semestersAndYears.Semesters,s=this.semestersAndYears.Years;this.coursesOfSemesters={},this.coursesOfYears={};var r,a=Object(h.a)(t);try{for(a.s();!(r=a.n()).done;){var n=r.value;for(var i in this.coursesOfSemesters[n]={},e)if(e[i].examAtThisSemester(n)){var c=Object(S.cloneDeep)(e[i]);c.currentState===O&&c.examCount>2&&(c.passedAtThisSemester(n)||(c.gradePoint=0)),this.coursesOfSemesters[n][c.name]=c}}}catch(f){a.e(f)}finally{a.f()}var o,d=Object(h.a)(s);try{for(d.s();!(o=d.n()).done;){var u=o.value;for(var l in this.coursesOfYears[u]={},e)if(e[l].examAtThisYear(u)){var m=Object(S.cloneDeep)(e[l]);m.currentState===O&&m.examCount>2&&(m.passedAtThisYear(u)||(m.gradePoint=0)),this.coursesOfYears[u][m.name]=m}}}catch(f){d.e(f)}finally{d.f()}}},{key:"gpaAndWAM",get:function(){var e={gpa:0,wam:0,bySemester:[],byYear:[]};for(var t in e.byYear=[],e.bySemester=[],e.gpa=this.getTotalGPA(this.courses),e.wam=this.getTotalWAM(this.courses),this.coursesOfSemesters)e.bySemester.push({semesterName:t.replaceAll(" 1"," \u79cb").replaceAll(" 2"," \u6625"),gpa:this.getTotalGPA(this.coursesOfSemesters[t]),wam:this.getTotalWAM(this.coursesOfSemesters[t])});for(var s in this.coursesOfYears)e.byYear.push({year:s,gpa:this.getTotalGPA(this.coursesOfYears[s]),wam:this.getTotalWAM(this.coursesOfYears[s])});return e}}]),e}(),y=function(e){var t=e.setGPAData,s=Object(r.useState)({name:"",size:""}),a=Object(c.a)(s,2),n=a[0],i=a[1],d=Object(r.useState)(!1),u=Object(c.a)(d,2),l=u[0],h=u[1],m=Object(r.useState)(!1),f=Object(c.a)(m,2),j=f[0],x=f[1],v=Object(r.useRef)(null);Object(r.useEffect)((function(){""!==n.size&&(h(!0),x(!1))}),[n]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"fileReader",children:[Object(o.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",ref:v,onChange:function(e){i({name:e.target.files[0].name||"",size:e.target.files[0].size+" Bytes"||!1})}}),Object(o.jsx)("label",{htmlFor:"file",className:"Btn selectBtn",children:"\u9009\u62e9\u6587\u4ef6"}),Object(o.jsxs)("label",{className:"Btn calculateBtn",onClick:function(){var e,s;if(!(null===(e=v.current)||void 0===e?void 0:e.files)||v.current.files[0]){x(!0);var r=new FileReader,a=null===v||void 0===v||null===(s=v.current)||void 0===s?void 0:s.files[0];r.readAsText(a,"utf-8"),r.onloadend=function(e){var s=e.target.result;try{var r=new C(s);t(r.gpaAndWAM)}catch(a){alert("\u6587\u4ef6\u683c\u5f0f\u9519\u8bef\u6216\u5185\u5bb9\u5f02\u5e38\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9"),console.log(a),x(!1),h(!1)}}}else alert("\u8bf7\u9009\u62e9\u6587\u4ef6")},children:["\u8ba1\u7b97\u6210\u7ee9"," "]})]}),l?Object(o.jsx)("div",{className:"notice",children:Object(o.jsx)("p",{className:"notice-item",children:j?"\u8ba1\u7b97\u7ed3\u679c\u5982\u4e0b":"\u6587\u4ef6\u5df2\u52a0\u8f7d"})}):""]})},Y=(s(23),function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:"footer",children:[Object(o.jsx)("p",{className:"footer-item",children:"\u53c2\u4e0e\u5236\u4f5c:"}),Object(o.jsx)("p",{className:"footer-item",children:"@xcl/\u8f6f\u4ef6\u5b66\u9662"}),Object(o.jsx)("p",{className:"footer-item",children:"@ddc/\u8f6f\u4ef6\u5b66\u9662"}),Object(o.jsx)("p",{className:"footer-item",children:"@RealmsPro/\u7535\u5b50\u4e0e\u4fe1\u606f\u5de5\u7a0b\u5b66\u9662"})]})})}),A=a.a.createContext({gpa:0,wam:0,bySemester:[],byYear:[]});var T=function(){var e=Object(r.useState)({gpa:0,wam:0,bySemester:[],byYear:[]}),t=Object(c.a)(e,2),s=t[0],a=t[1];return Object(o.jsx)(A.Provider,{value:s,children:Object(o.jsxs)("div",{children:[Object(o.jsx)(l,{}),Object(o.jsx)("p",{className:"readme",children:Object(o.jsx)("a",{href:"https://gpahelp.xcland.tech/",children:"\u4f7f\u7528\u6307\u5317"})}),Object(o.jsx)(y,{setGPAData:a}),Object(o.jsx)(u,{}),Object(o.jsx)(Y,{})]})})},N=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,25)).then((function(t){var s=t.getCLS,r=t.getFID,a=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),r(e),a(e),n(e),i(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root")),N()}],[[24,1,2]]]);
//# sourceMappingURL=main.75d8a5fa.chunk.js.map